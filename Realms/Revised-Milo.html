<!DOCTYPE html> 
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chimera Cat Cafe - Universe</title>
    <style>
        /* (Same styles as before, but with cerulean-grey ombre: background: linear-gradient(90deg, #808080, #007BA7); and border colors updated to #007BA7) */
        /* ... [Full CSS from previous universe.html, updated for colors] ... */
    </style>
</head>
<body>
    <h1 class="ombre-text">Chimera Cat Cafe</h1>

    <!-- Avatars (Now Links to Bio Pages, Including Milo) -->
    <div id="avatars">
        <a href="hans.html"><div class="avatar" style="background-image: url('https://via.placeholder.com/80x80?text=Hans');"></div></a>
        <a href="miki.html"><div class="avatar" style="background-image: url('https://via.placeholder.com/80x80?text=Miki');"></div></a>
        <a href="star.html"><div class="avatar" style="background-image: url('https://via.placeholder.com/80x80?text=Star');"></div></a>
        <a href="chari.html"><div class="avatar" style="background-image: url('https://via.placeholder.com/80x80?text=Chari');"></div></a>
        <a href="yeshua.html"><div class="avatar" style="background-image: url('https://via.placeholder.com/80x80?text=Yeshua');"></div></a>
        <a href="milo.html"><div class="avatar" style="background-image: url('https://via.placeholder.com/80x80?text=Milo');"></div></a>
    </div>

    <!-- Welcome -->
    <div id="welcome">Welcome - <span id="user-name"></span>! Dive into the lore and play your new tracks.</div>

    <!-- Music Player -->
    <div id="music-player">
        <div id="track-list">
            <div class="track" data-src="Stage1.mp3">Stage1.mp3</div>
            <div class="track" data-src="Surrender.mp3">Surrender.mp3</div>
            <div class="track" data-src="Yeshua.mp3">Yeshua.mp3</div>
            <div class="track" data-src="Crosstheline.mp3">Crosstheline.mp3</div>
            <div class="track" data-src="Teatime.mp3">Teatime.mp3</div>
            <div class="track" data-src="DinnerwithHans.mp3">DinnerwithHans.mp3</div>
            <div class="track" data-src="StarsCoffee.mp3">StarsCoffee.mp3</div>
        </div>
        <div id="controls">
            <button id="prev">Prev</button>
            <button id="play-pause">Play</button>
            <button id="next">Next</button>
        </div>
        <input type="range" id="progress" min="0" max="100" value="0">
        <audio id="audio" preload="none"></audio>
    </div>

    <!-- Gift Icon Link -->
    <div id="gift-link">
        <a href="https://ko-fi.com/xen" target="_blank">
            <svg id="gift-icon" viewBox="0 0 24 24">
                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                <rect x="3" y="20" width="18" height="2"/>
                <rect x="7" y="16" width="10" height="4"/>
            </svg>
        </a>
    </div>

    <!-- Support Section -->
    <div id="support">
        <div id="support-question">Would you like to support the game by donating a gift to the creator Xen?</div>
        <button class="button" onclick="handleSupport('yes')">Yes</button>
        <button class="button" onclick="handleSupport('no')">No</button>
        <div id="download-section" style="display: none;">
            <p>Thank you for your support! As a gift, download any of these tracks:</p>
            <a class="download-link" href="Stage1.mp3" download>Download Stage1.mp3</a>
            <a class="download-link" href="Surrender.mp3" download>Download Surrender.mp3</a>
            <a class="download-link" href="Yeshua.mp3" download>Download Yeshua.mp3</a>
            <a class="download-link" href="Crosstheline.mp3" download>Download Crosstheline.mp3</a>
            <a class="download-link" href="Teatime.mp3" download>Download Teatime.mp3</a>
            <a class="download-link" href="DinnerwithHans.mp3" download>Download DinnerwithHans.mp3</a>
            <a class="download-link" href="StarsCoffee.mp3" download>Download StarsCoffee.mp3</a>
            <p style="font-size: 0.8em; margin-top: 10px;">If downloads don't appear, check your email for a manual link from Xen.</p>
        </div>
        <div id="kofi-link" style="display: none;">
            <a href="https://ko-fi.com/xen" target="_blank" class="button glow">Donate to Xen on Ko-fi</a>
        </div>
    </div>

    <script>
        // Get user's name and check for donation status
        const urlParams = new URLSearchParams(window.location.search);
        const userName = urlParams.get('name') || 'Adventurer';
        const donated = urlParams.get('donated') === 'yes';
        document.getElementById('user-name').textContent = userName;

        if (donated) {
            // Show downloads if user has donated
            document.getElementById('support-question').style.display = 'none';
            document.querySelectorAll('#support .button').forEach(btn => btn.style.display = 'none');
            document.getElementById('download-section').style.display = 'block';
        }

        // Music Player Logic
        const audio = document.getElementById('audio');
        const tracks = document.querySelectorAll('.track');
        const playPauseBtn = document.getElementById('play-pause');
        const progressBar = document.getElementById('progress');
        let currentTrackIndex = 0;

        setTimeout(() => {
            loadTrack(0);
            audio.play();
            playPauseBtn.textContent = 'Pause';
        }, 1000);

        function loadTrack(index) {
            tracks.forEach(t => t.classList.remove('active'));
            tracks[index].classList.add('active');
            audio.src = tracks[index].dataset.src;
            audio.load();
        }

        playPauseBtn.addEventListener('click', () => {
            if (audio.paused) {
                audio.play();
                playPauseBtn.textContent = 'Pause';
            } else {
                audio.pause();
                playPauseBtn.textContent = 'Play';
            }
        });

        document.getElementById('next').addEventListener('click', () => {
            currentTrackIndex = (currentTrackIndex + 1) % tracks.length;
            loadTrack(currentTrackIndex);
            audio.play();
            playPauseBtn.textContent = 'Pause';
        });

        document.getElementById('prev').addEventListener('click', () => {
            currentTrackIndex = (currentTrackIndex - 1 + tracks.length) % tracks.length;
            loadTrack(currentTrackIndex);
            audio.play();
            playPauseBtn.textContent = 'Pause';
        });

        tracks.forEach((track, index) => {
            track.addEventListener('click', () => {
                currentTrackIndex = index;
                loadTrack(index);
                audio.play();
                playPauseBtn.textContent = 'Pause';
            });
        });

        audio.addEventListener('timeupdate', () => {
            progressBar.value = (audio.currentTime / audio.duration) * 100;
        });

        progressBar.addEventListener('input', () => {
            audio.currentTime = (progressBar.value / 100) * audio.duration;
        });

        // Support Logic
        function handleSupport(choice) {
            if (choice === 'yes') {
                document.getElementById('support-question').style.display = 'none';
                document.querySelectorAll('#support .button').forEach(btn => btn.style.display = 'none');
                document.getElementById('kofi-link').style.display = 'block';
            } else {
                document.getElementById('support-question').textContent = 'Thanks for playing!';
                document.querySelectorAll('#support .button').forEach(btn => btn.style.display = 'none');
            }
        }
    </script>
</body>
</html>
